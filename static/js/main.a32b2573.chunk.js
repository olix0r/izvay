(this.webpackJsonpizvay=this.webpackJsonpizvay||[]).push([[0],{102:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),o=n.n(i),c=(n(102),n(32)),l=n.n(c),u=n(69),s=n(12),m=n(63),f=n(7),p=n(139),d=n(133),h=n(138),g=n(135),v=n(137),E=n(134),w=n(131),b=n(129),y=n(136),x=n(132),j=n(109),k=function(e){var t=e.sections,n=e.view;return r.a.createElement(b.a,{item:!0,sm:12},r.a.createElement(b.a,{container:!0,spacing:3,direction:"row"},t.map((function(e){var t=e.title,a=e.rows,i=e.dimensions,o=e.showAxis;return r.a.createElement(b.a,{item:!0,sm:12,lg:6,key:"".concat(t," ")},r.a.createElement(w.a,null,r.a.createElement(b.a,{container:!0,direction:"column"},r.a.createElement(b.a,{container:!0,item:!0,sm:12},r.a.createElement(b.a,{item:!0,sm:2,key:"run"},r.a.createElement(w.a,null,r.a.createElement(x.a,null,t))),r.a.createElement(b.a,{item:!0,sm:10,key:"top-axis"},o&&r.a.createElement(j.a,{square:!0},r.a.createElement(n.TopAxis,i)))),r.a.createElement(b.a,{container:!0,item:!0,sm:12,alignItems:"flex-start",direction:"row"},a.map((function(e){var t=e.name,a=e.report;return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(b.a,{item:!0,container:!0,sm:2,direction:"row"},r.a.createElement(b.a,{item:!0,sm:1}),r.a.createElement(b.a,{item:!0,sm:11},r.a.createElement(w.a,null,r.a.createElement(x.a,{variant:"caption"},t)))),r.a.createElement(b.a,{item:!0,sm:10},r.a.createElement(j.a,{square:!0},r.a.createElement(n.Viz,{report:a,dimensions:i}))))}))))))}))))},O=n(65);function H(){var e=Object(O.a)(["\n  height: 100%;\n  width: 100%;\n  //background-color: #666;\n"]);return H=function(){return e},e}var A=n(68).a.svg(H()),S=function(e){var t=[],n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;t.length>0&&t[t.length-1].End<c.Start&&t.push({Start:t[t.length-1].End,End:c.Start,Count:0,Percent:0}),t.push(c)}}catch(l){a=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t},C={TopAxis:function(e){var t=e.maxLatency,n=e.rowHeight;return r.a.createElement(A,{ref:r.a.useCallback((function(e){if(null!==e&&t){var a=e.getBoundingClientRect().width,r=f.h(e).attr("preserveAspectRatio","none").attr("viewBox","0 0 ".concat(a," ").concat(1.5*n)),i=f.d().domain([0,t]).rangeRound([15,a-15]);r.append("g").call((function(e){e.attr("transform","translate(0,".concat(1.5*n,")")).call(f.a(i).tickSize(n/2).tickFormat((function(e){return"".concat(1e3*e.valueOf(),"ms")})))}))}}),[t,n])})},Viz:function(e){var t=e.report,n=e.dimensions;return r.a.createElement(A,{ref:r.a.useCallback((function(e){if(void 0!==t&&null!==e){var a=e.getBoundingClientRect().width,r=f.d().domain([0,n.maxLatency]).rangeRound([15,a-15]),i=f.h(e).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 ".concat(a," ").concat(n.rowHeight)),o=function(e){return Math.pow(e,1/4)},c=f.f(f.b).domain([0,o(n.maxRequests)]),l=f.e(f.g[5]).domain(["50","75","90","99","99.9"]),u=i.append("g").attr("transform","translate(0,0)").selectAll("g").data([t]).join("g");u.append("g").selectAll("rect").data((function(e){return S(e.DurationHistogram.Data)})).join("rect").attr("x",(function(e){return r(e.Start)+1})).attr("width",(function(e){return r(e.End)-r(e.Start)})).attr("height",n.rowHeight).attr("fill",(function(e){return c(o(e.Count))})).append("title").text((function(e){return"".concat(e.Count," reqs [").concat(1e3*e.Start,"ms..").concat(1e3*e.End,"ms)")})),u.append("g").selectAll("rect").data((function(e){return e.DurationHistogram.Percentiles})).join("rect").attr("x",(function(e){return r(e.Value)})).attr("y",n.rowHeight/3).attr("height",n.rowHeight/3).attr("width",n.rowHeight/6).attr("fill",(function(e){return l("".concat(e.Percentile))})).append("title").text((function(e){return"".concat(e.Percentile," percentile ").concat(1e3*e.Value,"ms")}))}}),[t,n])})}},R=Object(d.a)((function(e){return Object(h.a)({toolbar:{},title:{flexGrow:1}})}));function q(){return(q=Object(m.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./reports.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.map((function(e){var t=JSON.parse(e.Labels);return Object(u.a)({meta:t},e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B={by:"Profile",sections:function(e){console.log(e);var t=Object(p.a)(e,(function(e){return console.log(typeof e.meta),e.meta.name}));return Array.from(t).flatMap((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return{title:n,showAxis:!0,dimensions:{rowHeight:20,maxLatency:f.c(a,(function(e){return e.DurationHistogram.Max})),maxRequests:f.c(a,(function(e){return e.DurationHistogram.Count}))},rows:a.map((function(e){return{name:e.meta.run,report:e}})).sort((function(e,t){return e.name===t.name?0:e.name<t.name||"baseline"===e.name?-1:(console.assert(e.name>t.name||"baseline"===t.name),1)}))}})).sort((function(e,t){return e.title===t.title?0:e.title<t.title?-1:1}))}},D={by:"Run",sections:function(e){var t=Object(p.a)(e,(function(e){return e.meta.run})),n={rowHeight:20,maxLatency:f.c(e,(function(e){return e.DurationHistogram.Max})),maxRequests:f.c(e,(function(e){return e.DurationHistogram.Count}))};return Array.from(t).flatMap((function(e,t){var a=Object(s.a)(e,2),r=a[0],i=a[1];return{title:r,showAxis:!0,dimensions:n,rows:i.map((function(e){return{name:e.meta.name,report:e}})).sort((function(e,t){return e.name<t.name?-1:(console.assert(e.name<t.name||"baseline"===t.name),1)}))}})).sort((function(e,t){return e.title===t.title?0:e.title<t.title||"baseline"===e.title?-1:(console.assert(e.title>t.title||"baseline"===t.title),1)}))}},M=function(){var e=R(),t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],o=n[1],c=Object(a.useState)(D),l=Object(s.a)(c,2),u=l[0],m=l[1];Object(a.useEffect)((function(){(function(){return q.apply(this,arguments)})().then(o)}),[]);var f=u===D?B:D;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null),r.a.createElement(g.a,{position:"static"},r.a.createElement(y.a,{className:e.toolbar},r.a.createElement(x.a,{variant:"h6",className:e.title},"Proxy Latency Profile by ",u.by),r.a.createElement(v.a,{variant:"contained",color:"inherit",onClick:function(){return m(f)}},"By ",f.by))),r.a.createElement(w.a,{maxWidth:"xl"},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,sm:12,md:6,key:"spacer"}),r.a.createElement(b.a,{item:!0,sm:12,key:"requests-by-latency"},r.a.createElement(k,{sections:u.sections(i),view:C})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,n){e.exports=n(108)}},[[97,1,2]]]);
//# sourceMappingURL=main.a32b2573.chunk.js.map