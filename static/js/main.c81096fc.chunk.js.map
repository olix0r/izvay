{"version":3,"sources":["ReportGrid.tsx","RequestsByLatency.tsx","linkerd.svg","App.tsx","serviceWorker.js","index.js"],"names":["ReportGrid","sections","view","Grid","item","sm","container","spacing","direction","map","title","rows","showAxis","dimensions","lg","key","Container","Typography","Paper","square","TopAxis","alignItems","name","report","Fragment","variant","Viz","SvgStyled","styled","svg","fillGaps","original","filled","bucket","length","End","Start","push","Count","Percent","View","console","log","ref","React","useCallback","element","maxLatency","rowHeight","width","getBoundingClientRect","d3","attr","x","domain","rangeRound","append","call","g","tickSize","tickFormat","n","valueOf","undefined","scale","latency","Math","pow","boxColor","maxRequests","barColor","row","selectAll","data","join","r","DurationHistogram","Data","d","text","Percentiles","p","Value","Percentile","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","type","className","points","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","id","_ref","svgRef","props","y","viewBox","style","enableBackground","xmlSpace","gradientUnits","x1","y1","x2","y2","offset","stopColor","ForwardRef","forwardRef","useStyles","makeStyles","theme","createStyles","html","toolbar","flexGrow","paper","display","border","palette","divider","flexWrap","alignSelf","height","margin","a","fetch","rsp","json","reports","meta","JSON","parse","Labels","EmptyDimensions","byProfile","by","defaultScaler","_","section","Max","scaler","sectionScaler","group","Array","from","flatMap","run","sort","b","assert","byRun","all","OptionsGroup","withStyles","grouped","padding","borderRadius","shape","ToggleButtonGroup","App","styles","useState","setReports","useEffect","getReports","then","grouping","state","setState","CssBaseline","AppBar","position","Toolbar","IconButton","SvgIcon","component","LinkerdIcon","size","exclusive","value","onChange","aria-label","ToggleButton","disabled","maxWidth","md","RequestsByLatency","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.c81096fc.chunk.js","sourcesContent":["import React from \"react\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport { Report } from \"./fortio\";\n\n// A group of report rows.\nexport type Section = {\n  title: string,\n  rows: Row[],\n  dimensions: Dimensions,\n  showAxis: boolean,\n};\n\n// A single report row.\nexport type Row = {\n  name: string,\n  report: Report,\n};\n\nexport type Dimensions = {\n  maxLatency: number,\n  maxRequests: number,\n  rowHeight: number,\n};\n\nexport type TopAxis = React.FC<Dimensions>;\nexport type VizProps = { report: Report, dimensions: Dimensions };\nexport type Viz = React.FC<VizProps>;\n\n// A strategy for rendering a section.\nexport type View = {\n  TopAxis: TopAxis,\n  Viz: Viz\n};\n\ntype Props = {\n  sections: Section[],\n  view: View,\n};\n\n\nconst ReportGrid = ({ sections, view }: Props) => {\n  return (\n    <Grid item sm={12}>\n      <Grid container spacing={3} direction='row'>\n        {sections.map(({ title, rows, showAxis, dimensions }) => {\n          return (\n            <Grid item sm={12} lg={6} key={`${title} `}>\n              <Container>\n                <Grid container direction='column'>\n                  <Grid container item sm={12}>\n                    <Grid item sm={2} key='run'>\n                      <Container>\n                        <Typography>{title}</Typography>\n                      </Container>\n                    </Grid>\n                    <Grid item sm={10} key='top-axis'>\n                      {showAxis && <Paper square><view.TopAxis {...dimensions} /></Paper>}\n                    </Grid>\n                  </Grid>\n                  <Grid container item sm={12} alignItems='flex-start' direction='row'>\n                    {rows.map(({ name, report }) => {\n                      return (\n                        <React.Fragment key={name}>\n                          <Grid item container sm={2} direction='row'>\n                            <Grid item sm={1}></Grid>\n                            <Grid item sm={11}>\n                              <Container>\n                                <Typography variant='caption'>{name}</Typography>\n                              </Container>\n                            </Grid>\n                          </Grid>\n                          <Grid item sm={10}>\n                            <Paper square>\n                              <view.Viz report={report} dimensions={dimensions} />\n                            </Paper>\n                          </Grid>\n                        </React.Fragment>\n                      );\n                    })}\n                  </Grid>\n                </Grid>\n              </Container>\n            </Grid>\n          );\n        })}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ReportGrid;\n","import * as d3 from \"d3\";\nimport React from \"react\";\nimport styled from \"@emotion/styled\";\n\nimport { Bucket } from './fortio';\nimport * as ReportGrid from './ReportGrid';\n\nconst SvgStyled = styled.svg`\n  height: 100%;\n  width: 100%;\n  //background-color: #666;\n`;\n\nexport const TopAxis: ReportGrid.TopAxis = (dimensions) => {\n    console.log('Creating TopAxis', dimensions);\n\n    const draw = (element: SVGSVGElement) => {\n        const { maxLatency, rowHeight } = dimensions;\n        if (element === null || !maxLatency) {\n            return;\n        }\n        console.log('Drawing TopAxis', dimensions);\n\n        const { width } = element.getBoundingClientRect();\n        const svg = d3\n            .select(element)\n            //.attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n            .attr(\"preserveAspectRatio\", \"none\")\n            .attr(\"viewBox\", `0 0 ${width} ${rowHeight * 1.5}`);\n\n        const x = d3\n            .scaleLinear()\n            .domain([0, maxLatency!])\n            .rangeRound([15, width - 15]);\n\n        svg.append(\"g\").call(g => {\n            g.attr(\"transform\", `translate(0,${rowHeight * 1.5})`)\n                .call(\n                    d3.axisTop(x)\n                        .tickSize(rowHeight / 2)\n                        .tickFormat(n => `${n.valueOf() * 1000}ms`)\n                )\n        });\n    };\n\n    return <SvgStyled ref={React.useCallback(draw, [dimensions])} />;\n};\n\nexport const HeatMap: ReportGrid.Viz = ({ report, dimensions }) => {\n    console.log('Creating HeatMap', report, dimensions);\n\n    const draw = (element: SVGSVGElement) => {\n        if (report === undefined || element === null) {\n            return;\n        }\n        console.log('Drawing HeatMap', report, dimensions);\n        const { width } = element.getBoundingClientRect();\n\n        const x = d3\n            .scaleLinear()\n            .domain([0, dimensions.maxLatency!])\n            .rangeRound([15, width - 15]);\n\n        const svg = d3\n            .select(element)\n            .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n            .attr(\"viewBox\", `0 0 ${width} ${dimensions.rowHeight}`);\n\n        const scale = (latency: number) => Math.pow(latency, 1 / 4);\n        const boxColor = d3\n            .scaleSequential(d3.interpolateGreens)\n            .domain([0, scale(dimensions.maxRequests!)]);\n        const barColor = d3\n            .scaleOrdinal(d3.schemeYlOrRd[5])\n            .domain([\"50\", \"75\", \"90\", \"99\", \"99.9\"]);\n\n        const row = svg\n            .append(\"g\")\n            .attr(\"transform\", `translate(0,0)`)\n            .selectAll(\"g\")\n            .data([report])\n            .join(\"g\");\n\n        row\n            .append(\"g\")\n            .selectAll(\"rect\")\n            .data(r => fillGaps(r.DurationHistogram.Data))\n            .join(\"rect\")\n            .attr(\"x\", d => x(d.Start) + 1)\n            .attr(\"width\", d => x(d.End) - x(d.Start))\n            .attr(\"height\", dimensions.rowHeight)\n            .attr(\"fill\", d => boxColor(scale(d.Count)))\n            .append(\"title\")\n            .text(d => `${d.Count} reqs [${d.Start * 1000}ms..${d.End * 1000}ms)`);\n\n        row\n            .append(\"g\")\n            .selectAll(\"rect\")\n            .data(r => r.DurationHistogram.Percentiles)\n            .join(\"rect\")\n            .attr(\"x\", p => x(p.Value))\n            .attr(\"y\", dimensions.rowHeight / 3)\n            .attr(\"height\", dimensions.rowHeight / 3)\n            .attr(\"width\", dimensions.rowHeight / 6)\n            .attr(\"fill\", p => barColor(`${p.Percentile}`))\n            .append(\"title\")\n            .text(p => `${p.Percentile} percentile ${p.Value * 1000}ms`);\n    };\n\n    return <SvgStyled ref={React.useCallback(draw, [report, dimensions])} />;\n};\n\nconst fillGaps = (original: Bucket[]) => {\n    let filled: Bucket[] = [];\n    for (let bucket of original) {\n        // If there's a gap between the prior bucket and this one, insert an empty bucket in the gap.\n        if (filled.length > 0 && filled[filled.length - 1].End < bucket.Start) {\n            filled.push({\n                Start: filled[filled.length - 1].End,\n                End: bucket.Start,\n                Count: 0,\n                Percent: 0,\n            });\n        }\n        filled.push(bucket);\n    }\n    return filled;\n};\n\nexport const View: ReportGrid.View = {\n    TopAxis,\n    Viz: HeatMap,\n};\n\nexport default View;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"style\", {\n  type: \"text/css\"\n}, \"\\n\\t.st0{fill:#FF576B;}\\n\\t.st1{fill:#6D6E71;}\\n\\t.st2{fill:#FFFFFF;}\\n\\t.st3{fill:url(#SVGID_1_);}\\n\\t.st4{fill:url(#SVGID_2_);}\\n\\t.st5{fill:#2BEDA7;}\\n\\t.st6{fill:url(#SVGID_3_);}\\n\\t.st7{fill:url(#SVGID_4_);}\\n\\t.st8{fill:url(#SVGID_5_);}\\n\\t.st9{fill:url(#SVGID_6_);}\\n\\t.st10{fill:url(#SVGID_7_);}\\n\\t.st11{fill:url(#SVGID_8_);}\\n\\t.st12{fill:url(#SVGID_9_);}\\n\\t.st13{fill:url(#SVGID_10_);}\\n\\t.st14{fill:url(#SVGID_11_);}\\n\\t.st15{fill:url(#SVGID_12_);}\\n\\t.st16{fill:url(#SVGID_13_);}\\n\\t.st17{fill:url(#SVGID_14_);}\\n\\t.st18{fill:url(#SVGID_15_);}\\n\\t.st19{fill:url(#SVGID_16_);}\\n\\t.st20{fill:url(#SVGID_17_);}\\n\\t.st21{fill:url(#SVGID_18_);}\\n\\t.st22{fill:url(#SVGID_19_);}\\n\\t.st23{fill:url(#SVGID_20_);}\\n\\t.st24{fill:url(#SVGID_21_);}\\n\\t.st25{fill:url(#SVGID_22_);}\\n\\t.st26{fill:url(#SVGID_23_);}\\n\\t.st27{fill:url(#SVGID_24_);}\\n\\t.st28{filter:url(#Adobe_OpacityMaskFilter);}\\n\\t.st29{mask:url(#mask-2_6_);}\\n\\t.st30{fill:#018AFD;}\\n\\t.st31{fill:#00A2FD;}\\n\\t.st32{fill:#06C0FD;}\\n\\t.st33{fill:#03B5FD;}\\n\\t.st34{fill:#0074FD;}\\n\\t.st35{fill:#005CFD;}\\n\\t.st36{filter:url(#Adobe_OpacityMaskFilter_1_);}\\n\\t.st37{mask:url(#mask-4_6_);fill:#003CFD;}\\n\\t.st38{fill:#0E13FD;}\\n\\t.st39{filter:url(#Adobe_OpacityMaskFilter_2_);}\\n\\t.st40{mask:url(#mask-2_5_);fill:#FFFFFF;}\\n\\t.st41{filter:url(#Adobe_OpacityMaskFilter_3_);}\\n\\t.st42{mask:url(#mask-4_5_);fill:#003CFD;}\\n\\t.st43{filter:url(#Adobe_OpacityMaskFilter_4_);}\\n\\t.st44{mask:url(#mask-2_1_);fill:#FFFFFF;}\\n\\t.st45{filter:url(#Adobe_OpacityMaskFilter_5_);}\\n\\t.st46{mask:url(#mask-4_4_);fill:#FFFFFF;}\\n\\t.st47{fill:#018BFE;}\\n\\t.st48{fill:#02C2FE;}\\n\\t.st49{fill:#04B6FE;}\\n\\t.st50{fill:#0095FE;}\\n\\t.st51{fill:#0074FE;}\\n\\t.st52{fill:#005CFE;}\\n\\t.st53{fill:#003DFE;}\\n\\t.st54{fill:#0E13FE;}\\n\\t.st55{filter:url(#Adobe_OpacityMaskFilter_6_);}\\n\\t.st56{mask:url(#mask-2_7_);}\\n\\t.st57{filter:url(#Adobe_OpacityMaskFilter_7_);}\\n\\t.st58{mask:url(#mask-2_2_);fill:#FFFFFF;}\\n\\t.st59{filter:url(#Adobe_OpacityMaskFilter_8_);}\\n\\t.st60{mask:url(#mask-4_3_);fill:#003CFD;}\\n\\t.st61{filter:url(#Adobe_OpacityMaskFilter_9_);}\\n\\t.st62{mask:url(#mask-4_7_);fill:#003CFD;}\\n\\t.st63{filter:url(#Adobe_OpacityMaskFilter_10_);}\\n\\t.st64{mask:url(#mask-4_1_);fill:#003CFD;}\\n\\t.st65{fill:url(#SVGID_25_);}\\n\\t.st66{fill:url(#SVGID_26_);}\\n\\t.st67{fill:url(#SVGID_27_);}\\n\\t.st68{fill:url(#SVGID_28_);}\\n\\t.st69{fill:url(#SVGID_29_);}\\n\\t.st70{fill:url(#SVGID_30_);}\\n\\t.st71{fill:url(#SVGID_31_);}\\n\\t.st72{fill:url(#SVGID_32_);}\\n\\t.st73{fill:url(#SVGID_33_);}\\n\\t.st74{fill:url(#SVGID_34_);}\\n\\t.st75{fill:url(#SVGID_35_);}\\n\\t.st76{fill:url(#SVGID_36_);}\\n\\t.st77{fill:url(#SVGID_37_);}\\n\\t.st78{fill:url(#SVGID_38_);}\\n\\t.st79{fill:url(#SVGID_39_);}\\n\\t.st80{fill:url(#SVGID_40_);}\\n\\t.st81{fill:url(#SVGID_41_);}\\n\\t.st82{fill:url(#SVGID_42_);}\\n\\t.st83{fill:url(#SVGID_43_);}\\n\\t.st84{fill:url(#SVGID_44_);}\\n\\t.st85{fill:url(#SVGID_45_);}\\n\\t.st86{fill:url(#SVGID_46_);}\\n\\t.st87{fill:url(#SVGID_47_);}\\n\\t.st88{fill:url(#SVGID_48_);}\\n\\t.st89{fill:url(#SVGID_49_);}\\n\\t.st90{fill:url(#SVGID_50_);}\\n\\t.st91{fill:url(#SVGID_51_);}\\n\\t.st92{fill:url(#SVGID_52_);}\\n\\t.st93{fill:url(#SVGID_53_);}\\n\\t.st94{fill:url(#SVGID_54_);}\\n\\t.st95{fill:url(#SVGID_55_);}\\n\\t.st96{fill:url(#SVGID_56_);}\\n\\t.st97{fill:url(#SVGID_57_);}\\n\\t.st98{fill:url(#SVGID_58_);}\\n\\t.st99{fill:url(#SVGID_59_);}\\n\\t.st100{fill:url(#SVGID_60_);}\\n\\t.st101{fill:url(#SVGID_61_);}\\n\\t.st102{fill:url(#SVGID_62_);}\\n\\t.st103{fill:url(#SVGID_63_);}\\n\\t.st104{fill:url(#SVGID_64_);}\\n\\t.st105{display:none;}\\n\\t.st106{display:inline;}\\n\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"st3\",\n  points: \"476.4,89 476.4,281.8 512,302.4 512,109.6  \"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"st4\",\n  points: \"0,302.4 35.6,281.8 35.6,89 0,109.6  \"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null, React.createElement(\"polygon\", {\n  className: \"st5\",\n  points: \"174.2,300.5 337.8,394.9 337.8,353.8 184.7,265.4 174.2,271.5 174.2,271.5  \"\n}), React.createElement(\"path\", {\n  className: \"st5\",\n  d: \"M347.2,449.6l-172.9-99.8v41.1l46.2,26.7l-55.6,32.1c-3.7,2.2-3.7,7.6,0,9.7L192,475l64-36.9l64,36.9 l27.1-15.7C350.9,457.1,350.9,451.7,347.2,449.6z\"\n}));\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st6\",\n  d: \"M476.4,204v170.9c0,4.3,4.7,7,8.4,4.9l24.3-14.1c1.7-1,2.8-2.9,2.8-4.9V183.5L476.4,204z\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st7\",\n  d: \"M406.6,424.9l22.9-13.2c2.6-1.5,4.2-4.3,4.2-7.3V228.6l-35.6,20.5v170.9 C398.2,424.4,402.9,427.1,406.6,424.9z\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st8\",\n  d: \"M320,475l32.8-18.9c1.7-1,2.8-2.9,2.8-4.9V273.8L320,294.3V475z\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st9\",\n  d: \"M159.3,456.1L192,475V294.3l-35.6-20.5v177.4C156.5,453.2,157.5,455.1,159.3,456.1z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st10\",\n  d: \"M82.4,411.7l22.9,13.2c3.7,2.2,8.4-0.5,8.4-4.9V249.1l-35.6-20.5v175.8C78.2,407.4,79.8,410.2,82.4,411.7z \"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"st11\",\n  d: \"M4.2,366.5l22.9,13.2c3.7,2.2,8.4-0.5,8.4-4.9V204L0,183.5v175.8C0,362.3,1.6,365,4.2,366.5z\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null, React.createElement(\"path\", {\n  className: \"st5\",\n  d: \"M512,109.6L476.4,89l-64,36.9l-42.6-24.6l55.6-32.1c3.7-2.2,3.7-7.6,0-9.7l-22.9-13.2 c-2.6-1.5-5.8-1.5-8.4,0l-59.8,34.5l-42.6-24.6l55.6-32.1c3.7-2.2,3.7-7.6,0-9.7L324.2,1.1c-2.6-1.5-5.8-1.5-8.4,0L256,35.7 L196.2,1.1c-2.6-1.5-5.8-1.5-8.4,0l-22.9,13.2c-3.7,2.2-3.7,7.6,0,9.7L476.4,204l35.6-20.5l-64-37L512,109.6z\"\n}), React.createElement(\"path\", {\n  className: \"st5\",\n  d: \"M109.6,46.3L86.6,59.5c-3.7,2.2-3.7,7.6,0,9.7l311.6,179.9l35.6-20.5L118,46.3 C115.4,44.8,112.2,44.8,109.6,46.3z\"\n}), React.createElement(\"polygon\", {\n  className: \"st5\",\n  points: \"0,109.6 64,146.5 0,183.5 35.6,204 99.6,167.1 142.2,191.7 78.2,228.6 113.8,249.2 177.8,212.2  220.4,236.8 156.4,273.8 192,294.3 256,257.4 320,294.3 355.6,273.8 35.6,89  \"\n}));\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"nyt_x5F_exporter_x5F_info\",\n  className: \"st105\"\n});\n\nvar SvgLinkerd = function SvgLinkerd(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 475\",\n    style: {\n      enableBackground: \"new 0 0 512 475\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, React.createElement(\"g\", {\n    id: \"Layer_1\"\n  }, React.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"linearGradient\", {\n    id: \"SVGID_1_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 494.2216,\n    y1: 89.0164,\n    x2: 494.2216,\n    y2: 302.3534\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref3, React.createElement(\"linearGradient\", {\n    id: \"SVGID_2_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 17.7781,\n    y1: 89.0217,\n    x2: 17.7781,\n    y2: 302.3659\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref4), _ref5, React.createElement(\"g\", null, React.createElement(\"linearGradient\", {\n    id: \"SVGID_3_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 494.2216,\n    y1: 183.4557,\n    x2: 494.2216,\n    y2: 380.5421\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref6, React.createElement(\"linearGradient\", {\n    id: \"SVGID_4_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 415.9966,\n    y1: 228.6177,\n    x2: 415.9966,\n    y2: 425.704\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref7, React.createElement(\"linearGradient\", {\n    id: \"SVGID_5_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 337.7726,\n    y1: 273.7769,\n    x2: 337.7726,\n    y2: 474.9643\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref8, React.createElement(\"linearGradient\", {\n    id: \"SVGID_6_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 174.2449,\n    y1: 273.7773,\n    x2: 174.2449,\n    y2: 474.9612\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref9, React.createElement(\"linearGradient\", {\n    id: \"SVGID_7_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 96.0212,\n    y1: 228.6163,\n    x2: 96.0212,\n    y2: 425.7035\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref10, React.createElement(\"linearGradient\", {\n    id: \"SVGID_8_\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: 17.7973,\n    y1: 183.4524,\n    x2: 17.7973,\n    y2: 380.5396\n  }, React.createElement(\"stop\", {\n    offset: 0,\n    style: {\n      stopColor: \"#2BEDA7\"\n    }\n  }), React.createElement(\"stop\", {\n    offset: 1,\n    style: {\n      stopColor: \"#018AFD\"\n    }\n  })), _ref11), _ref12))), _ref13);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLinkerd, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/linkerd.d42eae22.svg\";\nexport { ForwardRef as ReactComponent };","import * as d3 from \"d3\";\nimport { group } from \"d3-array\"\nimport React, { useEffect, useState, } from \"react\";\nimport { createStyles, makeStyles, withStyles, Theme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Container from \"@material-ui/core/Container\";\nimport Divider from \"@material-ui/core/Divider\";\nimport FormatAlignJustifyIcon from '@material-ui/icons/FormatAlignJustify';\nimport FormatAlignLeftIcon from '@material-ui/icons/FormatAlignLeft';\nimport Grid from \"@material-ui/core/Grid\";\nimport HorizontalSplitIcon from '@material-ui/icons/HorizontalSplit';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\n\nimport * as fortio from \"./fortio\";\nimport ReportGrid, { Section, Dimensions } from './ReportGrid'\nimport RequestsByLatency from './RequestsByLatency'\n//import LatencyByRequests from './LatencyByRequests'\nimport { ReactComponent as LinkerdIcon } from './linkerd.svg';\n\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    html: {\n      //width: 'calc(100% - 34px)',\n    },\n    toolbar: {},\n    title: {\n      flexGrow: 1,\n    },\n    paper: {\n      display: 'flex',\n      border: `1px solid ${theme.palette.divider}`,\n      flexWrap: 'wrap',\n    },\n    divider: {\n      alignSelf: 'stretch',\n      height: 'auto',\n      margin: theme.spacing(1, 0.5),\n    },\n  }),\n);\n\n// Fetches a list of test results from the server.\nasync function getReports() {\n  const rsp = await fetch(\"./reports.json\");\n  const reports: fortio.Report[] = await rsp.json();\n  return reports.map(report => {\n    const meta: Meta = JSON.parse(report.Labels);\n    return { meta, ...report };\n  });\n}\n\ntype Meta = {\n  name: string,\n  run: string,\n};\ntype Report = fortio.Report & {\n  meta: Meta,\n};\n\ntype Grouping = {\n  by: string;\n  defaultScaler: Scaler,\n  sections(reports: Report[], scaler: Scaler): Section[];\n};\n\nconst Baseline = \"baseline\";\n\nconst RowHeight = 20;\n\nconst EmptyDimensions: Dimensions & { showAxis: boolean } = {\n  rowHeight: RowHeight,\n  maxLatency: 0,\n  maxRequests: 0,\n  showAxis: false,\n};\n\nexport type Scaler = {\n  scale: (all: Report[]) => (section: Report[]) => Dimensions & { showAxis: boolean };\n}\n\nconst AbsoluteScaler: Scaler = {\n  scale: (all: Report[]) => {\n    if (!all || all.length === 0) {\n      return (section: Report[]) => EmptyDimensions;\n    }\n\n    const dimensions = {\n      showAxis: true,\n      rowHeight: RowHeight,\n      maxLatency: d3.max(all, r => r.DurationHistogram.Max)!,\n      maxRequests: d3.max(all, r => r.DurationHistogram.Count)!,\n    };\n    return (section: Report[]) => dimensions;\n  },\n};\n\nconst RelativeScaler: Scaler = {\n  scale: (_: Report[]) => {\n    return (section: Report[]) => {\n      if (section.length === 0) {\n        return EmptyDimensions;\n      }\n\n      return {\n        showAxis: true,\n        rowHeight: RowHeight,\n        maxLatency: d3.max(section, r => r.DurationHistogram.Max)!,\n        maxRequests: d3.max(section, r => r.DurationHistogram.Count)!,\n      };\n    }\n  },\n};\n\nconst byProfile: Grouping = {\n  by: \"Profile\",\n  defaultScaler: RelativeScaler,\n  sections: (reports: Report[], scaler: Scaler) => {\n    const sectionScaler = scaler.scale(reports);\n    const sections = group(reports, r => r.meta.name);\n    return Array.from(sections).flatMap(([title, rows]) => {\n      const { showAxis, ...dimensions } = sectionScaler(rows)\n      return {\n        title, showAxis, dimensions,\n        rows: rows.map(report => {\n          const name = report.meta.run;\n          return { name, report };\n        }).sort((a, b) => {\n          if (a.name === b.name) {\n            return 0;\n          }\n          if (a.name < b.name || a.name === Baseline) {\n            return -1;\n          }\n          console.assert(a.name > b.name || b.name === Baseline);\n          return 1;\n        }),\n      };\n    }).sort((a, b) => {\n      if (a.title === b.title) {\n        return 0;\n      }\n      if (a.title < b.title) {\n        return -1;\n      }\n      return 1;\n    });\n  },\n};\n\nconst byRun: Grouping = {\n  by: \"Run\",\n  defaultScaler: AbsoluteScaler,\n  sections: (reports: Report[], scaler: Scaler) => {\n    const sectionScaler = scaler.scale(reports);\n    const sections = group(reports, r => r.meta.run);\n    return Array.from(sections).flatMap(([title, rows], i) => {\n      const { showAxis, ...dimensions } = sectionScaler(rows)\n      return {\n        title, showAxis, dimensions,\n        rows: rows.map(report => {\n          const name = report.meta.name;\n          return { name, report };\n        }).sort((a, b) => {\n          if (a.name < b.name) {\n            return -1;\n          }\n          console.assert(a.name > b.name);\n          return 1;\n        }),\n      };\n    }).sort((a, b) => {\n      if (a.title === b.title) {\n        return 0;\n      }\n      if (a.title < b.title || a.title === Baseline) {\n        return -1;\n      }\n      console.assert(a.title > b.title || b.title === Baseline);\n      return 1;\n    });\n  },\n};\n\nconst OptionsGroup = withStyles((theme) => ({\n  grouped: {\n    margin: theme.spacing(0.5),\n    border: 'none',\n    padding: theme.spacing(0, 1),\n    '&:not(:first-child)': {\n      borderRadius: theme.shape.borderRadius,\n    },\n    '&:first-child': {\n      borderRadius: theme.shape.borderRadius,\n    },\n  },\n}))(ToggleButtonGroup);\n\nconst App = () => {\n  const styles = useStyles();\n\n  const [reports, setReports] = useState<Report[]>([]);\n  useEffect(() => {\n    getReports().then(setReports);\n  }, []);\n\n  type State = { grouping: Grouping, scaler: Scaler };\n  const [state, setState] = useState<State>({\n    grouping: byProfile,\n    scaler: byProfile.defaultScaler\n  });\n\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <AppBar position=\"static\">\n        <Toolbar className={styles.toolbar}>\n          <IconButton>\n            <SvgIcon component={LinkerdIcon} viewBox=\"0 0 600 476.6\" />\n          </IconButton>\n          <Typography variant=\"h6\" className={styles.title}>\n            Proxy Latency by {state.grouping.by}\n          </Typography>\n          <OptionsGroup\n            size=\"small\"\n            exclusive value={state.grouping}\n            onChange={(_, g: Grouping) => {\n              console.log(\"changing grouping\", g, g.defaultScaler);\n              setState({ grouping: g, scaler: g.defaultScaler });\n            }}\n            aria-label=\"Report grouping\"\n          >\n            <ToggleButton value={byRun} aria-label=\"By run\" disabled={byRun === state.grouping}>\n              <HorizontalSplitIcon />\n            </ToggleButton>\n            <ToggleButton value={byProfile} aria-label=\"By profile\" disabled={byProfile === state.grouping}>\n              <VerticalSplitIcon />\n            </ToggleButton>\n          </OptionsGroup>\n          {false && (\n            <React.Fragment>\n              <Divider orientation=\"vertical\" className={styles.divider} />\n              <OptionsGroup\n                size=\"small\"\n                exclusive value={state.scaler}\n                onChange={(_, s: Scaler) => {\n                  console.log(\"changing scale\", s);\n                  setState({ grouping: state.grouping, scaler: s || state.grouping.defaultScaler });\n                }}\n                aria-label=\"Latency scale\"\n              >\n                <ToggleButton value={AbsoluteScaler} aria-label=\"Absolute scale\" disabled={AbsoluteScaler === state.scaler}>\n                  <FormatAlignJustifyIcon />\n                </ToggleButton>\n                <ToggleButton value={RelativeScaler} aria-label=\"Relative scale\" disabled={RelativeScaler === state.scaler}>\n                  <FormatAlignLeftIcon />\n                </ToggleButton>\n              </OptionsGroup>\n            </React.Fragment>\n          )}\n        </Toolbar>\n      </AppBar>\n      <Container maxWidth='xl'>\n        <Grid container spacing={2}>\n          <Grid item sm={12} md={6} key='spacer'></Grid>\n          <Grid item sm={12} key='requests-by-latency'>\n            <ReportGrid\n              sections={state.grouping.sections(reports, state.scaler)}\n              view={RequestsByLatency}\n            />\n          </Grid>\n        </Grid>\n      </Container>\n    </React.Fragment >\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}