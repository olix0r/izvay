(this.webpackJsonpizvay=this.webpackJsonpizvay||[]).push([[0],{88:function(e,t,n){e.exports=n(99)},93:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(56),c=n.n(i),o=(n(93),n(20)),l=n(26),u=n.n(l),m=n(57),s=n(3),f=n(116),d=n(114),p=n(112),v=n(113),g=n(117),E=n(115),h=function(e,t){return e.kind!==t.kind?"baseline"===e.kind?-1:1:e.name===t.name?0:e.name<t.name?-1:1},x=function(e){var t=e.reports,n=e.dimensions,a=e.view;return r.a.createElement(p.a,{item:!0,sm:12},r.a.createElement(v.a,{elevation:2},r.a.createElement(p.a,{container:!0,spacing:3,direction:"row"},r.a.createElement(p.a,{item:!0,sm:12,key:"baseline"},r.a.createElement(d.a,null,r.a.createElement(v.a,{elevation:2},r.a.createElement(p.a,{container:!0,direction:"column"},r.a.createElement(p.a,{container:!0,item:!0,sm:12},r.a.createElement(p.a,{item:!0,sm:2,key:"run"},r.a.createElement(d.a,null,r.a.createElement(E.a,null,"baseline"))),r.a.createElement(p.a,{item:!0,sm:10,key:"top-axis"},r.a.createElement(a.topAxis,{maxLatency:n.maxLatency,maxRequests:n.maxRequests,rowHeight:n.rowHeight}))),r.a.createElement(p.a,{container:!0,item:!0,sm:12,alignItems:"flex-start"},t.baseline.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement(p.a,{item:!0,container:!0,sm:2,key:"run",direction:"row"},r.a.createElement(p.a,{item:!0,sm:1}),r.a.createElement(p.a,{item:!0,sm:11},r.a.createElement(d.a,null,r.a.createElement(E.a,{variant:"caption"},e.name)))),r.a.createElement(p.a,{item:!0,sm:10},r.a.createElement(a.viz,{report:e,dimensions:n})))}))))))),Array.from(Object(g.a)(t.proxy,(function(e){return e.run})).values()).flatMap((function(e){var t=e.sort(h),i=t[0].run;return r.a.createElement(p.a,{item:!0,sm:12,key:"".concat(i," ")},r.a.createElement(d.a,null,r.a.createElement(v.a,{elevation:2},r.a.createElement(p.a,{container:!0,direction:"column"},r.a.createElement(p.a,{item:!0,sm:12},r.a.createElement(d.a,null,r.a.createElement(E.a,null,i))),r.a.createElement(p.a,{container:!0,item:!0,sm:12,alignItems:"flex-start",direction:"row"},t.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement(p.a,{item:!0,container:!0,sm:2,direction:"row"},r.a.createElement(p.a,{item:!0,sm:1}),r.a.createElement(p.a,{item:!0,sm:11},r.a.createElement(d.a,null,r.a.createElement(E.a,{variant:"caption"},e.name)))),r.a.createElement(p.a,{item:!0,sm:10},r.a.createElement(a.viz,{report:e,dimensions:n})))})))))))})))))},w=n(18),y=n(19);function b(){var e=Object(w.a)(["\n  height: 100%;\n  width: 100%;\n  //background-color: #666;\n"]);return b=function(){return e},e}var k=y.a.svg(b()),R=function(e){var t=e.maxLatency,n=e.rowHeight;return r.a.createElement(k,{ref:Object(a.useCallback)((function(e){if(null!==e&&t){var a=e.getBoundingClientRect().width,r=s.i(e).attr("preserveAspectRatio","none").attr("viewBox","0 0 ".concat(a," ").concat(1.5*n)),i=s.e().domain([0,t]).rangeRound([15,a-15]);r.append("g").call((function(e){e.attr("transform","translate(0,".concat(1.5*n,")")).call(s.a(i).tickSize(n/2).tickFormat((function(e){return"".concat(1e3*e.valueOf(),"ms")})))}))}}),[t,n])})},j=function(e){var t=e.report,n=e.dimensions;return r.a.createElement(k,{ref:Object(a.useCallback)((function(e){if(void 0!==t&&null!==e){var a=e.getBoundingClientRect().width,r=s.e().domain([0,n.maxLatency]).rangeRound([15,a-15]),i=s.i(e).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 ".concat(a," ").concat(n.rowHeight)),c=function(e){return Math.pow(e,1/4)},o=s.g(s.c).domain([0,c(n.maxRequests)]),l=s.f(s.h[5]).domain(["50","75","90","99","99.9"]),u=i.append("g").attr("transform","translate(0,0)").selectAll("g").data([t]).join("g");u.append("g").selectAll("rect").data((function(e){return H(e.fortio.DurationHistogram.Data)})).join("rect").attr("x",(function(e){return r(e.Start)+1})).attr("width",(function(e){return r(e.End)-r(e.Start)})).attr("height",n.rowHeight).attr("fill",(function(e){return o(c(e.Count))})).append("title").text((function(e){return"".concat(e.Count," reqs [").concat(1e3*e.Start,"ms..").concat(1e3*e.End,"ms)")})),u.append("g").selectAll("rect").data((function(e){return e.fortio.DurationHistogram.Percentiles})).join("rect").attr("x",(function(e){return r(e.Value)})).attr("y",n.rowHeight/3).attr("height",n.rowHeight/3).attr("width",n.rowHeight/4).attr("fill",(function(e){return l("".concat(e.Percentile))})).append("title").text((function(e){return"".concat(e.Percentile," percentile ").concat(1e3*e.Value,"ms")}))}}),[t,n])})},H=function(e){var t=[],n=!0,a=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;t.length>0&&t[t.length-1].End<o.Start&&t.push({Start:t[t.length-1].End,End:o.Start,Count:0,Percent:0}),t.push(o)}}catch(l){a=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return t};function q(){var e=Object(w.a)(["\n  height: 100%;\n  width: 100%;\n  //background-color: #666;\n"]);return q=function(){return e},e}var C=y.a.svg(q());function O(e){var t=e.fortio,n=[],a=0,r=!0,i=!1,c=void 0;try{for(var o,l=t.DurationHistogram.Data[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;n.push({prior:a,bucket:u}),a+=u.Count}}catch(m){i=!0,c=m}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}return n}var A=function(e){var t=e.maxRequests,n=e.rowHeight;return r.a.createElement(C,{ref:Object(a.useCallback)((function(e){if(null!==e&&t){var a=e.getBoundingClientRect().width,r=s.i(e).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 ".concat(a," ").concat(1.5*n)),i=s.e().domain([0,t]).rangeRound([15,a-15]);r.append("g").call((function(e){return e.attr("transform","translate(0,".concat(1.5*n,")")).call(s.a(i).tickSize(n/2).tickFormat((function(e){return"".concat(e.valueOf()/1e3,"K")})))}))}}),[t,n])})},L=function(e){var t=e.report,n=e.dimensions;return r.a.createElement(C,{ref:Object(a.useCallback)((function(e){if(void 0!==t&&null!==e){var a=e.getBoundingClientRect().width,r=s.e().domain([0,n.maxRequests]).rangeRound([15,a-15]),i=s.i(e).attr("preserveAspectRatio","none").attr("viewBox","0 0 ".concat(a," ").concat(n.rowHeight)),c=function(e){return Math.pow(e,.5)},o=s.g(s.b).domain([0,c(n.maxLatency)]);i.append("g").selectAll("g").data([t]).join("g").append("g").selectAll("rect").data(O).join("rect").attr("x",(function(e){var t=e.prior;return r(t)+1})).attr("width",(function(e){var t=e.prior,n=e.bucket;return r(t+n.Count)-r(t)})).attr("height",n.rowHeight).attr("fill",(function(e){var t=e.bucket;return o(c(t.End))})).append("title").text((function(e){var t=e.prior,n=e.bucket;return"".concat(t+n.Count," reqs <").concat(1e3*n.End,"ms")}))}}),[t,n])})},S=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./reports.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent.reduce((function(e,t){var n=JSON.parse(t.Labels),a=n.run,r=n.kind,i=n.name;return e[r].push({kind:r,name:i,run:a,fortio:t}),e}),{proxy:[],baseline:[]}),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(a.useState)({maxLatency:0,maxRequests:0,reports:{baseline:[],proxy:[]}}),t=Object(o.a)(e,2),n=t[0],i=t[1];Object(a.useEffect)((function(){S().then((function(e){var t=s.d(e.baseline.concat(e.proxy),(function(e){e.run,e.kind,e.name;return e.fortio.DurationHistogram.Max})),n=s.d(e.baseline.concat(e.proxy),(function(e){return e.fortio.DurationHistogram.Count}));i({maxLatency:t,maxRequests:n,reports:e})}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null),r.a.createElement(d.a,{maxWidth:"xl"},r.a.createElement(p.a,{container:!0,spacing:5},r.a.createElement(p.a,{item:!0,sm:12}),r.a.createElement(p.a,{item:!0,sm:12,xl:6,key:"requests-by-latency"},r.a.createElement(v.a,{elevation:2},r.a.createElement(x,{reports:n.reports,view:{topAxis:R,viz:j},dimensions:{maxLatency:n.maxLatency,maxRequests:n.maxRequests,rowHeight:20}}))),r.a.createElement(p.a,{item:!0,sm:12,xl:6,key:"latency-by-requests"},r.a.createElement(v.a,{elevation:2},r.a.createElement(x,{reports:n.reports,view:{topAxis:A,viz:L},dimensions:{maxLatency:n.maxLatency,maxRequests:n.maxRequests,rowHeight:20}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[88,1,2]]]);
//# sourceMappingURL=main.915b2dce.chunk.js.map