(this.webpackJsonpizvay=this.webpackJsonpizvay||[]).push([[0],{102:function(t,e,n){},108:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),c=(n(102),n(32)),l=n.n(c),u=n(69),s=n(12),m=n(63),f=n(7),p=n(139),d=n(133),h=n(138),g=n(135),v=n(137),E=n(134),w=n(131),b=n(129),y=n(136),x=n(132),j=n(109),k=function(t){var e=t.sections,n=t.view;return r.a.createElement(b.a,{item:!0,sm:12},r.a.createElement(b.a,{container:!0,spacing:3,direction:"row"},e.map((function(t){var e=t.title,a=t.rows,o=t.dimensions,i=t.showAxis;return r.a.createElement(b.a,{item:!0,sm:12,lg:6,key:"".concat(e," ")},r.a.createElement(w.a,null,r.a.createElement(b.a,{container:!0,direction:"column"},r.a.createElement(b.a,{container:!0,item:!0,sm:12},r.a.createElement(b.a,{item:!0,sm:2,key:"run"},r.a.createElement(w.a,null,r.a.createElement(x.a,null,e))),r.a.createElement(b.a,{item:!0,sm:10,key:"top-axis"},i&&r.a.createElement(j.a,{square:!0},r.a.createElement(n.TopAxis,o)))),r.a.createElement(b.a,{container:!0,item:!0,sm:12,alignItems:"flex-start",direction:"row"},a.map((function(t){var e=t.name,a=t.report;return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(b.a,{item:!0,container:!0,sm:2,direction:"row"},r.a.createElement(b.a,{item:!0,sm:1}),r.a.createElement(b.a,{item:!0,sm:11},r.a.createElement(w.a,null,r.a.createElement(x.a,{variant:"caption"},e)))),r.a.createElement(b.a,{item:!0,sm:10},r.a.createElement(j.a,{square:!0},r.a.createElement(n.Viz,{report:a,dimensions:o}))))}))))))}))))},O=n(65);function H(){var t=Object(O.a)(["\n  height: 100%;\n  width: 100%;\n  //background-color: #666;\n"]);return H=function(){return t},t}var A=n(68).a.svg(H()),S=function(t){var e=[],n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;e.length>0&&e[e.length-1].End<c.Start&&e.push({Start:e[e.length-1].End,End:c.Start,Count:0,Percent:0}),e.push(c)}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return e},C={TopAxis:function(t){var e=t.maxLatency,n=t.rowHeight;return r.a.createElement(A,{ref:r.a.useCallback((function(t){if(null!==t&&e){var a=t.getBoundingClientRect().width,r=f.h(t).attr("preserveAspectRatio","none").attr("viewBox","0 0 ".concat(a," ").concat(1.5*n)),o=f.d().domain([0,e]).rangeRound([15,a-15]);r.append("g").call((function(t){t.attr("transform","translate(0,".concat(1.5*n,")")).call(f.a(o).tickSize(n/2).tickFormat((function(t){return"".concat(1e3*t.valueOf(),"ms")})))}))}}),[e,n])})},Viz:function(t){var e=t.report,n=t.dimensions;return r.a.createElement(A,{ref:r.a.useCallback((function(t){if(void 0!==e&&null!==t){var a=t.getBoundingClientRect().width,r=f.d().domain([0,n.maxLatency]).rangeRound([15,a-15]),o=f.h(t).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 ".concat(a," ").concat(n.rowHeight)),i=function(t){return Math.pow(t,1/4)},c=f.f(f.b).domain([0,i(n.maxRequests)]),l=f.e(f.g[5]).domain(["50","75","90","99","99.9"]),u=o.append("g").attr("transform","translate(0,0)").selectAll("g").data([e]).join("g");u.append("g").selectAll("rect").data((function(t){return S(t.DurationHistogram.Data)})).join("rect").attr("x",(function(t){return r(t.Start)+1})).attr("width",(function(t){return r(t.End)-r(t.Start)})).attr("height",n.rowHeight).attr("fill",(function(t){return c(i(t.Count))})).append("title").text((function(t){return"".concat(t.Count," reqs [").concat(1e3*t.Start,"ms..").concat(1e3*t.End,"ms)")})),u.append("g").selectAll("rect").data((function(t){return t.DurationHistogram.Percentiles})).join("rect").attr("x",(function(t){return r(t.Value)})).attr("y",n.rowHeight/3).attr("height",n.rowHeight/3).attr("width",n.rowHeight/6).attr("fill",(function(t){return l("".concat(t.Percentile))})).append("title").text((function(t){return"".concat(t.Percentile," percentile ").concat(1e3*t.Value,"ms")}))}}),[e,n])})}},R=Object(d.a)((function(t){return Object(h.a)({toolbar:{},title:{flexGrow:1}})}));function q(){return(q=Object(m.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./reports.json");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n.map((function(t){var e=JSON.parse(t.Labels);return Object(u.a)({meta:e},t)})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var B={by:"Profile",sections:function(t){console.log(t);var e=Object(p.a)(t,(function(t){return console.log(typeof t.meta),t.meta.name}));return Array.from(e).flatMap((function(t){var e=Object(s.a)(t,2),n=e[0],a=e[1];return{title:n,showAxis:!0,dimensions:{rowHeight:20,maxLatency:f.c(a,(function(t){return t.DurationHistogram.Max})),maxRequests:f.c(a,(function(t){return t.DurationHistogram.Count}))},rows:a.map((function(t){return{name:t.meta.run,report:t}})).sort((function(t,e){return t.name===e.name?0:t.name<e.name||"baseline"===t.name?-1:(console.assert(t.name>e.name||"baseline"===e.name),1)}))}})).sort((function(t,e){return t.title===e.title?0:t.title<e.title?-1:1}))}},D={by:"Run",sections:function(t){var e=Object(p.a)(t,(function(t){return t.meta.run})),n={rowHeight:20,maxLatency:f.c(t,(function(t){return t.DurationHistogram.Max})),maxRequests:f.c(t,(function(t){return t.DurationHistogram.Count}))};return Array.from(e).flatMap((function(t,e){var a=Object(s.a)(t,2),r=a[0],o=a[1];return{title:r,showAxis:!0,dimensions:n,rows:o.map((function(t){return{name:t.meta.name,report:t}})).sort((function(t,e){return t.name<e.name?-1:(console.assert(t.name>e.name),1)}))}})).sort((function(t,e){return t.title===e.title?0:t.title<e.title||"baseline"===t.title?-1:(console.assert(t.title>e.title||"baseline"===e.title),1)}))}},M=function(){var t=R(),e=Object(a.useState)([]),n=Object(s.a)(e,2),o=n[0],i=n[1],c=Object(a.useState)(D),l=Object(s.a)(c,2),u=l[0],m=l[1];Object(a.useEffect)((function(){(function(){return q.apply(this,arguments)})().then(i)}),[]);var f=u===D?B:D;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null),r.a.createElement(g.a,{position:"static"},r.a.createElement(y.a,{className:t.toolbar},r.a.createElement(x.a,{variant:"h6",className:t.title},"Proxy Latency Profile by ",u.by),r.a.createElement(v.a,{variant:"contained",color:"inherit",onClick:function(){return m(f)}},"By ",f.by))),r.a.createElement(w.a,{maxWidth:"xl"},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,sm:12,md:6,key:"spacer"}),r.a.createElement(b.a,{item:!0,sm:12,key:"requests-by-latency"},r.a.createElement(k,{sections:u.sections(o),view:C})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},97:function(t,e,n){t.exports=n(108)}},[[97,1,2]]]);
//# sourceMappingURL=main.40d68413.chunk.js.map